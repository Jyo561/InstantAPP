// Required for Instant Apps
apply plugin: 'com.android.instantapp'

android {
    // Match the SDK versions with your base module
    compileSdkVersion 33
    buildToolsVersion "33.0.0"

    defaultConfig {
        // Minimum SDK for Instant Apps
        minSdkVersion 23
        targetSdkVersion 33

        // Required for React Native compatibility
        missingDimensionStrategy "react-native-camera", "general"
    }

    // Required for React Native vector icons and assets
    aaptOptions {
        additionalParameters "--no-version-vectors"
    }

    // Needed for modern Android development
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }
}

dependencies {
    // Base React Native module (must be a dynamic feature)
    implementation project(':app')

    // Instant App dependencies
    implementation('com.google.android.gms:play-services-instantapps:18.0.1')

    // React Native required dependencies (should match app module)
    implementation("com.facebook.react:react-android")
    implementation("com.facebook.react:hermes-android")
    implementation("androidx.swiperefreshlayout:swiperefreshlayout:1.0.0")
    // Add these if using React Native navigation solutions
    implementation("androidx.appcompat:appcompat:1.6.1")
    implementation("androidx.core:core-ktx:1.9.0")
}

// Required for proper React Native module resolution
repositories {
    google()
    mavenCentral()
    maven {
        url "$rootDir/../node_modules/react-native/android"
    }
}
